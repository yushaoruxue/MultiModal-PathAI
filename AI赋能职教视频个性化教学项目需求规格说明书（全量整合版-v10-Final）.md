# AI赋能职教视频个性化教学项目需求规格说明书（全量整合版-v10-Final）

## 【Final Release Notes（全量整合版）】

- **定位**：本文件为**v1.0—v10.0（Final）全量整合版**，用于评审/立项归档/直接交付架构师进行系统设计与研发拆分。
- **权威来源**：
  - **终版增量与最终约束**：以 `AI赋能职教视频个性化教学项目需求规格说明书（第十稿-Final）.md` 为最高优先级。
  - **v9.0（定稿建议版）全量正文**：以 `AI赋能职教视频个性化教学项目需求规格说明书（第九稿-完整版）.md` 为主体参考。
  - **v6.0-v8.0关键能力**：以对应版本文档为补充与追溯依据（包含：信号不协和、溯源诊断、安全熔断、螺旋路径、冷启动专家基准等）。
- **阅读建议（五篇章主轴）**：按“愿景与技术栈 → 核心业务流 → 复杂情境适配 → 系统健壮性 → 数据安全与审计”阅读与评审。

---

## 文档版本信息

- **版本号**：v10.0（Integrated Final）
- **编写日期**：2026年1月
- **编写团队**：周东吴（组长）、成怡、杨雅娟、张亚鹏、雷宇
- **技术顾问**：蒋国伟
- **指导老师**：王海霞
- **文档状态**：Final Production Ready（全量整合版）

---

## 目录（按五篇章主轴）

### 第一篇：愿景与技术栈
1. [项目愿景与边界](#1-项目愿景与边界)
2. [关键术语与核心定义](#2-关键术语与核心定义)
3. [技术栈与组件清单（可落地实现）](#3-技术栈与组件清单可落地实现)

### 第二篇：核心业务流（覆盖90%正常教学场景）
4. [核心业务流总览（端到端）](#4-核心业务流总览端到端)
5. [模块A：多模态解析与知识建模](#5-模块a多模态解析与知识建模)
6. [模块B：行为采集与认知状态识别](#6-模块b行为采集与认知状态识别)
7. [模块C：路径生成与分层干预](#7-模块c路径生成与分层干预)
8. [模块D：教师端（Coach Mode/策略/审核）](#8-模块d教师端coach-mode策略审核)

### 第三篇：复杂情境适配（职教特有难题）
9. [溯源式诊断（GNN）与根因回补](#9-溯源式诊断gnn与根因回补)
10. [知识环路与螺旋路径（含跳出L3）](#10-知识环路与螺旋路径含跳出l3)
11. [职教安全熔断与动作核验（DTW/标准库）](#11-职教安全熔断与动作核验dtw标准库)
12. [冷启动：专家基准 + 跨课原型匹配](#12-冷启动专家基准--跨课原型匹配)

### 第四篇：系统健壮性（核心落地能力）
13. [干预抗震荡（Hysteresis）与冷静期](#13-干预抗震荡hysteresis与冷静期)
14. [多模态时间戳对齐（Sync Window）与语义脱节](#14-多模态时间戳对齐sync-window与语义脱节)
15. [弱网降级与本地缓存（IndexDB）](#15-弱网降级与本地缓存indexdb)
16. [硬件画像与三级降级（全量/精简/仅日志）+权重补偿](#16-硬件画像与三级降级全量精简仅日志权重补偿)
17. [人机冲突处理：写锁（Write Lock）+租约（Lease Timeout）+原子发布](#17-人机冲突处理写锁write-lock租约lease-timeout原子发布)

### 第五篇：数据安全与审计（长期稳定运行不跑偏）
18. [数据审计引擎（异常/恶意反馈过滤）](#18-数据审计引擎异常恶意反馈过滤)
19. [难度保护区（Difficulty Protection Zone）与下架仲裁](#19-难度保护区difficulty-protection-zone与下架仲裁)
20. [教师主权：禁用AI/专家标注/统一调参（激进系数）](#20-教师主权禁用ai专家标注统一调参激进系数)

### 附录
21. [数据模型总览（按版本增量收敛）](#21-数据模型总览按版本增量收敛)
22. [接口总览（v1-v10收敛版）](#22-接口总览v1-v10收敛版)
23. [测试与验收（终版清单）](#23-测试与验收终版清单)
24. [版本演进摘要（v6-v10）](#24-版本演进摘要v6-v10)

---

## 1. 项目愿景与边界

- **愿景**：以“主动智能补偿”为核心，通过多模态学习分析（Multimodal Learning Analytics）识别学习障碍，自动生成/筛选补偿资源，输出个性化学习路径，实现“**一人一策**”。
- **边界**：
  - 不做泛娱乐平台推荐；聚焦职业教育（优先汽修）。
  - 不追求100%自动化；关键节点保留教师主权与人工确认。

## 2. 关键术语与核心定义

- **信号不协和（Signal Dissonance）**：用视线/微表情/行为/环境音交叉验证，避免用单一时间阈值误判。
- **干预抗震荡（Hysteresis）**：L1/L2 触发后进入冷静期，避免“弹窗震荡”；安全熔断不受限。
- **Sync Window（±3s对齐窗口）**：将ASR/CV/行为事件在窗口内合并为同一语义块；>5s 记录语义脱节并提示教师校验。
- **Write Lock（写锁）**：教师进入专家标注后暂停AI写入；v10.0补齐 Lease Timeout + 回滚稳定版本 + 原子发布交还托管。

## 3. 技术栈与组件清单（可落地实现）

- **前端**：Vue 3 + Element Plus + Pinia + Video.js/DPlayer + ECharts；WebSocket 同步；IndexDB 本地缓存；WebGazer/face-api（可选，受降级策略控制）。
- **后端**：FastAPI + SQLAlchemy + PostgreSQL + Redis + RabbitMQ；Neo4j（或图数据层）。
- **AI引擎**：Whisper/讯飞ASR，PaddleOCR，YOLOv8，SlowFast+DTW，BERT-base-Chinese，GNN（PyG）。

---

## 4. 核心业务流总览（端到端）

1) 视频上传与解析（模块A）→ 2) 学习行为与多模态采集（模块B）→ 3) 困难识别与根因诊断（模块B/9）→ 4) 路径与补偿资源推送（模块C）→ 5) 教师端审核/干预（模块D）→ 6) 反馈闭环与审计（模块C/18）

> 说明：本整合版的细节实现与约束以 v9.0+v10.0 为主；历史版本用于追溯“为何这样设计”。

---

## 5-20.（正文整合）

### 5-12（核心能力与复杂情境）
- 详见 `AI赋能职教视频个性化教学项目需求规格说明书（第九稿-完整版）.md` 的对应章节（模块A-D、溯源诊断、螺旋路径、安全熔断、冷启动专家基准），并以 `第十稿-Final` 的增量约束为准（原型匹配、硬件降级、写锁原子发布、审计引擎、教师激进系数等）。

### 13-16（健壮性与适配）
- 抗震荡/对齐/弱网：以 v9.0 为准。
- 硬件画像与三级降级 + 权重补偿：以 v10.0 为准（仅日志模式下行为权重 0.4→0.8）。

### 17（人机冲突处理）
- 写锁（Write Lock）+ 租约（Lease Timeout 30min）+ 心跳续租 + 超时自动释放回滚 + 原子发布交还AI托管：以 v10.0 为准（并在接口层明确）。

### 18-20（审计、保护区、教师主权）
- 数据审计引擎：以 v10.0 为准（含“反馈-行为一致性 ≥80%”）。
- 难度保护区：以 v10.0 为准（高难点提高下架阈值，并增加一致性校验）。
- 教师主权：以 v9.0（禁用AI/专家标注）+ v10.0（激进系数/锁定协议）为准。

---

## 21. 数据模型总览（按版本增量收敛）

- **v6-v9核心表**：以 `第九稿-完整版` 为准。
- **v10增量表/字段**：以 `第十稿-Final` 第7章为准（写锁/版本/设备画像/原型匹配/审计与仲裁等）。

## 22. 接口总览（v1-v10收敛版）

- **v6-v9接口**：以 `第九稿-完整版` 为准。
- **v10接口增量**：以 `第十稿-Final` 第8章为准（包含 `POST /api/v10/lock/acquire|heartbeat|release` 的Lease契约）。

## 23. 测试与验收（终版清单）

- 以 `第九稿-完整版` 验收为基础，叠加 `第十稿-Final` 第9章的终版验收项（并发冲突、硬件降级、原型匹配、激进系数、审计过滤等）。

## 24. 版本演进摘要（v6-v10）

- **v6**：从“数据驱动”转向“认知+情境驱动”，引入信号不协和/溯源诊断/安全熔断/DTW动作评分/资源反馈闭环。
- **v7**：低置信度人机协作兜底、个体认知步频、灰度复核、L3停滞自动触发、剪辑上下文保留、教师趋势预测。
- **v8**：难度系数加权步频、学习风格自适应、信号心跳、知识环路与螺旋路径、专家基准冷启动。
- **v9**：抗震荡冷静期、Sync Window对齐、弱网降级+IndexDB缓存、教师禁用AI+专家标注、螺旋跳出L3。
- **v10**：写锁+原子发布+Lease Timeout、硬件画像三级降级+权重补偿、跨课原型匹配冷启动、教师激进系数、数据审计与保护区仲裁。

---

## 文档结束

- **权威终版**：`AI赋能职教视频个性化教学项目需求规格说明书（第十稿-Final）.md`
- **全量主体**：`AI赋能职教视频个性化教学项目需求规格说明书（第九稿-完整版）.md`

