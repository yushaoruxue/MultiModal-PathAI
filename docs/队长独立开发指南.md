# 队长独立开发指南 - 哪些可以独立开发

## 📋 核心结论

**✅ 你可以直接开始开发，不需要等队员！**

所有核心算法模块都可以**独立开发**，使用**模拟数据**进行开发和测试。后续再与队员的模块对接。

---

## 🔍 各模块依赖关系分析

### 模块A：视频多模态解析核心算法（第3-4周）

#### 依赖关系
- **需要**：张亚鹏的ASR/OCR结果（第3-4周）
- **但可以**：先用模拟数据开发算法逻辑

#### 独立开发策略
```python
# 1. 先定义数据接口（输入格式）
ASR_TEXT_FORMAT = [
    {"start_time": 0.0, "end_time": 120.0, "text": "大家好，今天我们来学习..."},
    {"start_time": 120.0, "end_time": 240.0, "text": "函数是一种映射关系..."},
]

OCR_TEXT_FORMAT = [
    {"start_time": 0.0, "end_time": 60.0, "text": "函数定义", "slide_number": 1},
]

# 2. 使用模拟数据开发算法
segmenter = KnowledgePointSegmenter()
result = segmenter.segment(mock_asr_texts, mock_ocr_texts)

# 3. 后续对接时，只需替换数据源
# 从张亚鹏的API获取真实数据
real_asr = get_asr_from_api(video_id)
real_ocr = get_ocr_from_api(video_id)
result = segmenter.segment(real_asr, real_ocr)
```

**可以独立开发的部分**：
- ✅ 知识点切分算法逻辑
- ✅ 知识点自动标注逻辑
- ✅ 知识图谱关系计算
- ⏳ 与ASR/OCR集成（等张亚鹏完成后对接）

---

### 模块B：难点识别算法（第5周）

#### 依赖关系
- **需要**：成怡的前端行为采集（第3-4周）
- **需要**：杨雅娟的后端行为存储（第4-5周）
- **但可以**：先用模拟数据开发算法逻辑

#### 独立开发策略
```python
# 1. 定义行为数据格式
MOCK_BEHAVIOR_DATA = {
    "user_id": 1,
    "knowledge_point_id": 10,
    "replay_count": 3,
    "pause_count": 5,
    "total_watch_time": 600.0,
    "knowledge_point_duration": 200.0,
    "seek_count": 2,
}

# 2. 使用模拟数据开发算法
detector = DifficultyDetector()
result = detector.detect(MOCK_BEHAVIOR_DATA, knowledge_point_info)

# 3. 后续对接时，从数据库获取真实数据
real_behavior = db.get_watch_events(user_id, knowledge_point_id)
result = detector.detect(real_behavior, knowledge_point_info)
```

**可以独立开发的部分**：
- ✅ 难点判定规则引擎
- ✅ 困难度分数计算算法
- ✅ 公共难点识别逻辑
- ⏳ 从数据库获取行为数据（等杨雅娟完成后对接）

---

### 模块C：学习路径生成算法（第6-7周）

#### 依赖关系
- **需要**：杨雅娟的后端API（第6-7周）
- **但可以**：完全独立开发算法逻辑

#### 独立开发策略
```python
# 1. 定义输入数据格式
MOCK_MASTERY_STATUS = {
    1: "已掌握",
    2: "学习中",
    3: "疑难",
    4: "未学",
}

MOCK_DEPENDENCIES = [
    (1, 2, "prerequisite"),  # 知识点1是知识点2的前置
    (2, 3, "prerequisite"),
]

# 2. 完全独立开发算法
generator = LearningPathGenerator()
path = generator.generate_path(
    user_id=1,
    mastery_status=MOCK_MASTERY_STATUS,
    dependencies=MOCK_DEPENDENCIES,
    difficult_points=[3]
)

# 3. 后续对接时，从API获取真实数据
real_mastery = api.get_mastery_status(user_id)
real_deps = api.get_dependencies()
path = generator.generate_path(user_id, real_mastery, real_deps, difficult_points)
```

**可以独立开发的部分**：
- ✅ 个性化路径生成算法（完全独立）
- ✅ 动态路径调整逻辑（完全独立）
- ✅ 补偿资源推送策略（完全独立）
- ⏳ 与后端API对接（等杨雅娟完成后对接）

---

### 模块D：补偿资源生成（第6-7周）

#### 依赖关系
- **需要**：AI模型API（可以自己先集成）
- **可以**：完全独立开发

#### 独立开发策略
```python
# 1. 定义知识点信息格式
MOCK_KNOWLEDGE_POINT = {
    "id": 10,
    "name": "函数定义",
    "summary": "函数是一种映射关系...",
    "keywords": ["函数", "映射", "定义"],
    "difficulty": "medium",
}

# 2. 独立开发生成逻辑
card_generator = KnowledgeCardGenerator()
card = card_generator.generate_card(MOCK_KNOWLEDGE_POINT, asr_text, ocr_text)

exercise_generator = ExerciseGenerator()
exercises = exercise_generator.generate_exercises(MOCK_KNOWLEDGE_POINT, count=5)

# 3. AI模型可以自己先集成（调用GPT/Claude API）
# 或者先用模板生成，后续再接入AI
```

**可以独立开发的部分**：
- ✅ 知识卡片生成模板（可以先用模板，后续接入AI）
- ✅ 练习题生成逻辑（可以先用模板，后续接入AI）
- ✅ 补偿资源推送机制（完全独立）
- ✅ 资源质量评估（完全独立）

---

## 🎯 推荐开发顺序（独立开发）

### 第3周：模块A - 知识点切分算法

**可以立即开始**：
1. ✅ 设计算法流程
2. ✅ 实现知识点切分算法（使用模拟ASR/OCR数据）
3. ✅ 实现知识点自动标注逻辑
4. ✅ 编写单元测试

**等待对接**：
- ⏳ 与张亚鹏的ASR/OCR结果集成（第4周）

---

### 第5周：模块B - 难点识别算法

**可以立即开始**：
1. ✅ 设计难点判定规则引擎
2. ✅ 实现困难度分数计算（使用模拟行为数据）
3. ✅ 实现公共难点识别逻辑
4. ✅ 编写单元测试

**等待对接**：
- ⏳ 从数据库获取真实行为数据（等杨雅娟完成后）

---

### 第6-7周：模块C和D - 学习路径和补偿资源

**可以立即开始**：
1. ✅ 学习路径生成算法（完全独立）
2. ✅ 动态路径调整逻辑（完全独立）
3. ✅ 补偿资源生成（可以先用模板）
4. ✅ 资源推送策略（完全独立）

**等待对接**：
- ⏳ 与后端API对接（等杨雅娟完成后）
- ⏳ AI模型集成（可以自己先集成，或先用模板）

---

## 📝 开发建议

### 1. 先定义接口规范

在开发算法前，先定义好：
- **输入数据格式**（JSON Schema）
- **输出数据格式**（JSON Schema）
- **函数签名**（类型注解）

这样后续对接时，只需要替换数据源，算法逻辑不需要改动。

### 2. 使用模拟数据开发

创建 `algorithm/tests/mock_data.py`：

```python
# 模拟ASR数据
MOCK_ASR_TEXTS = [
    {"start_time": 0.0, "end_time": 120.0, "text": "..."},
    # ...
]

# 模拟行为数据
MOCK_BEHAVIOR_DATA = {
    "replay_count": 3,
    "pause_count": 5,
    # ...
}

# 模拟掌握状态
MOCK_MASTERY_STATUS = {
    1: "已掌握",
    2: "疑难",
    # ...
}
```

### 3. 编写单元测试

使用模拟数据编写完整的单元测试，确保算法逻辑正确：

```python
def test_knowledge_point_segmenter():
    segmenter = KnowledgePointSegmenter()
    result = segmenter.segment(MOCK_ASR_TEXTS, MOCK_OCR_TEXTS)
    assert len(result) > 0
    assert all('name' in kp for kp in result)
    # ...
```

### 4. 后续对接时

只需要：
1. 从API/数据库获取真实数据
2. 转换为算法需要的格式
3. 调用算法函数
4. 处理返回结果

算法逻辑本身不需要改动。

---

## ✅ 总结

### 可以立即开始开发
- ✅ **模块A**：知识点切分算法（使用模拟数据）
- ✅ **模块B**：难点识别算法（使用模拟数据）
- ✅ **模块C**：学习路径生成算法（完全独立）
- ✅ **模块D**：补偿资源生成（完全独立）

### 需要等待对接（但不影响开发）
- ⏳ 模块A与ASR/OCR集成（第4周）
- ⏳ 模块B从数据库获取行为数据（第5周）
- ⏳ 模块C/D与后端API对接（第7周）

### 关键点
1. **先定义接口规范**，确保后续对接顺畅
2. **使用模拟数据开发**，不依赖外部服务
3. **编写完整测试**，确保算法正确性
4. **后续只需替换数据源**，算法逻辑不变

---

**结论：你现在就可以开始开发所有核心算法模块！** 🚀
