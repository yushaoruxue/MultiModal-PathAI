# å›¢é˜Ÿå¼€å‘å¯¹æ¥è¯´æ˜

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£è¯´æ˜é˜Ÿé•¿å·²å®Œæˆçš„å·¥ä½œã€éœ€è¦å¯¹æ¥çš„åŠŸèƒ½ï¼Œä»¥åŠå„é˜Ÿå‘˜åº”è¯¥åœ¨å“ªé‡Œå®ç°è‡ªå·±çš„åŠŸèƒ½ã€‚

**æœ€åæ›´æ–°**ï¼š2025-01-25

---

## âœ… é˜Ÿé•¿å·²å®Œæˆçš„å·¥ä½œ

### 1. ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼ˆç¬¬1-2å‘¨ï¼‰âœ…

**å·²å®Œæˆæ–‡æ¡£**ï¼š
- `docs/ç³»ç»Ÿæ¶æ„è®¾è®¡.md` - å®Œæ•´çš„ç³»ç»Ÿæ¶æ„è®¾è®¡
- `docs/æ•°æ®åº“è®¾è®¡.md` - æ•°æ®åº“ERå›¾å’Œè¡¨ç»“æ„è®¾è®¡
- `docs/APIæ¥å£è§„èŒƒ.md` - RESTful APIæ¥å£è§„èŒƒï¼ˆOpenAPI 3.0æ ¼å¼ï¼‰
- `docs/å¼€å‘è§„èŒƒ.md` - å¼€å‘è§„èŒƒå’Œä»£ç è§„èŒƒ

**ä½ç½®**ï¼š`docs/` ç›®å½•

---

### 2. æ ¸å¿ƒç®—æ³•æ¨¡å—å¼€å‘ï¼ˆç¬¬3-8å‘¨ï¼‰âœ…

#### æ¨¡å—Aï¼šè§†é¢‘å¤šæ¨¡æ€è§£ææ ¸å¿ƒç®—æ³• âœ…

**å·²å®Œæˆæ–‡ä»¶**ï¼ˆä½ç½®ï¼š`algorithm/` ç›®å½•ï¼‰ï¼š

1. **`knowledge_point_segmenter.py`** - çŸ¥è¯†ç‚¹åˆ‡åˆ†ç®—æ³•
   - åŠŸèƒ½ï¼šåŸºäºASR/OCRæ–‡æœ¬è‡ªåŠ¨åˆ‡åˆ†çŸ¥è¯†ç‚¹
   - è¾“å…¥ï¼šASRè½¬å†™æ–‡æœ¬ã€OCRè¯†åˆ«æ–‡æœ¬
   - è¾“å‡ºï¼šçŸ¥è¯†ç‚¹åˆ—è¡¨ï¼ˆåŒ…å«åç§°ã€æ—¶é—´ã€å…³é”®è¯ã€æ‘˜è¦ã€éš¾åº¦ï¼‰

2. **`knowledge_point_annotator.py`** - çŸ¥è¯†ç‚¹è‡ªåŠ¨æ ‡æ³¨
   - åŠŸèƒ½ï¼šè‡ªåŠ¨ç”ŸæˆçŸ¥è¯†ç‚¹åç§°ã€æ‘˜è¦ã€å…³é”®è¯ã€éš¾åº¦ã€ç±»å‹
   - è¾“å…¥ï¼šçŸ¥è¯†ç‚¹æ–‡æœ¬å†…å®¹
   - è¾“å‡ºï¼šå®Œæ•´çš„çŸ¥è¯†ç‚¹æ ‡æ³¨ä¿¡æ¯

3. **`knowledge_graph_builder.py`** - çŸ¥è¯†å›¾è°±æ„å»º
   - åŠŸèƒ½ï¼šåˆ†æçŸ¥è¯†ç‚¹ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€ç›¸å…³å…³ç³»ã€åŒ…å«å…³ç³»
   - è¾“å…¥ï¼šçŸ¥è¯†ç‚¹åˆ—è¡¨
   - è¾“å‡ºï¼šçŸ¥è¯†å›¾è°±ï¼ˆNetworkXå›¾ç»“æ„ï¼‰

4. **`semantic_similarity.py`** - è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆä¼˜åŒ–æ¨¡å—ï¼‰
   - åŠŸèƒ½ï¼šç»Ÿä¸€çš„è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—æ¥å£ï¼Œæ”¯æŒsentence-transformers

5. **`optimized_segmenter.py`** - ä¼˜åŒ–ç‰ˆåˆ‡åˆ†å™¨ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

**éœ€è¦å¯¹æ¥**ï¼š
- â³ **å¼ äºšé¹çš„ASR/OCRç»“æœ**ï¼ˆç¬¬3-4å‘¨ï¼‰
  - å½“å‰ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼ˆ`algorithm/tests/mock_data.py`ï¼‰
  - å¯¹æ¥ç‚¹ï¼šæ›¿æ¢æ¨¡æ‹Ÿæ•°æ®ä¸ºå¼ äºšé¹çš„APIè°ƒç”¨

---

#### æ¨¡å—Bï¼šéš¾ç‚¹è¯†åˆ«ç®—æ³• âœ…

**å·²å®Œæˆæ–‡ä»¶**ï¼ˆä½ç½®ï¼š`algorithm/` ç›®å½•ï¼‰ï¼š

1. **`difficulty_detector.py`** - éš¾ç‚¹åˆ¤å®šè§„åˆ™å¼•æ“
   - åŠŸèƒ½ï¼šåŸºäºè§‚çœ‹è¡Œä¸ºæ•°æ®è¯†åˆ«ç–‘éš¾ç‚¹
   - è¾“å…¥ï¼šè§‚çœ‹è¡Œä¸ºæ•°æ®ï¼ˆå›æ”¾æ¬¡æ•°ã€æš‚åœæ¬¡æ•°ã€è§‚çœ‹æ—¶é•¿ç­‰ï¼‰
   - è¾“å‡ºï¼šæ˜¯å¦ä¸ºç–‘éš¾ç‚¹ã€å›°éš¾åº¦åˆ†æ•°ã€è§¦å‘åŸå› 

2. **`public_difficulty_detector.py`** - å…¬å…±éš¾ç‚¹è¯†åˆ«
   - åŠŸèƒ½ï¼šè¯†åˆ«å¤šä¸ªå­¦ç”Ÿéƒ½æ„Ÿåˆ°å›°éš¾çš„çŸ¥è¯†ç‚¹
   - è¾“å…¥ï¼šå¤šä¸ªå­¦ç”Ÿçš„è¡Œä¸ºæ•°æ®
   - è¾“å‡ºï¼šæ˜¯å¦ä¸ºå…¬å…±éš¾ç‚¹ã€å›°éš¾å­¦ç”Ÿæ¯”ä¾‹ã€æ•™å­¦å»ºè®®

**éœ€è¦å¯¹æ¥**ï¼š
- â³ **æˆæ€¡çš„å‰ç«¯è¡Œä¸ºé‡‡é›†**ï¼ˆç¬¬3-4å‘¨ï¼‰
  - å½“å‰ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
  - å¯¹æ¥ç‚¹ï¼šä»æ•°æ®åº“è·å–çœŸå®è¡Œä¸ºæ•°æ®

- â³ **æ¨é›…å¨Ÿçš„åç«¯API**ï¼ˆç¬¬4-5å‘¨ï¼‰
  - å½“å‰ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
  - å¯¹æ¥ç‚¹ï¼šä»åç«¯APIè·å–è¡Œä¸ºæ•°æ®

---

#### æ¨¡å—Cï¼šå­¦ä¹ è·¯å¾„ç”Ÿæˆç®—æ³• âœ…

**å·²å®Œæˆæ–‡ä»¶**ï¼ˆä½ç½®ï¼š`algorithm/` ç›®å½•ï¼‰ï¼š

1. **`learning_path_generator.py`** - ä¸ªæ€§åŒ–è·¯å¾„ç”Ÿæˆç®—æ³•
   - åŠŸèƒ½ï¼šä¸ºæ¯ä¸ªå­¦ç”Ÿç”Ÿæˆå®šåˆ¶åŒ–çš„å­¦ä¹ é¡ºåº
   - è¾“å…¥ï¼šæŒæ¡çŠ¶æ€ã€ä¾èµ–å…³ç³»ã€ç–‘éš¾ç‚¹åˆ—è¡¨
   - è¾“å‡ºï¼šå­¦ä¹ è·¯å¾„åºåˆ—

2. **`path_adjuster.py`** - åŠ¨æ€è·¯å¾„è°ƒæ•´é€»è¾‘
   - åŠŸèƒ½ï¼šæ ¹æ®å­¦ä¹ è¿›åº¦å®æ—¶è°ƒæ•´è·¯å¾„
   - è¾“å…¥ï¼šå½“å‰è·¯å¾„ã€å­¦ä¹ äº‹ä»¶
   - è¾“å‡ºï¼šè°ƒæ•´åçš„è·¯å¾„

3. **`remedial_resource_strategy.py`** - è¡¥å¿èµ„æºæ¨é€ç­–ç•¥
   - åŠŸèƒ½ï¼šæ™ºèƒ½çš„èµ„æºæ¨é€æœºåˆ¶ï¼ˆä¸‰çº§æ¨é€ç­–ç•¥ï¼‰
   - è¾“å…¥ï¼šçŸ¥è¯†ç‚¹IDã€ç”¨æˆ·IDã€å›°éš¾ç­‰çº§
   - è¾“å‡ºï¼šæ¨é€ç­–ç•¥ã€èµ„æºåˆ—è¡¨

**éœ€è¦å¯¹æ¥**ï¼š
- â³ **æ¨é›…å¨Ÿçš„åç«¯API**ï¼ˆç¬¬6-7å‘¨ï¼‰
  - å½“å‰ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
  - å¯¹æ¥ç‚¹ï¼šä»åç«¯APIè·å–æŒæ¡çŠ¶æ€ã€ä¾èµ–å…³ç³»

---

#### æ¨¡å—Dï¼šè¡¥å¿èµ„æºç”Ÿæˆ âœ…

**å·²å®Œæˆæ–‡ä»¶**ï¼ˆä½ç½®ï¼š`algorithm/` ç›®å½•ï¼‰ï¼š

1. **`knowledge_card_generator.py`** - çŸ¥è¯†å¡ç‰‡ç”Ÿæˆ
   - åŠŸèƒ½ï¼šä¸ºç–‘éš¾çŸ¥è¯†ç‚¹ç”Ÿæˆè¡¥å¿å­¦ä¹ èµ„æºï¼ˆMarkdownæ ¼å¼ï¼‰
   - è¾“å…¥ï¼šçŸ¥è¯†ç‚¹ä¿¡æ¯ã€ASR/OCRæ–‡æœ¬
   - è¾“å‡ºï¼šçŸ¥è¯†å¡ç‰‡å†…å®¹

2. **`exercise_generator.py`** - ç»ƒä¹ é¢˜è‡ªåŠ¨ç”Ÿæˆ
   - åŠŸèƒ½ï¼šç”Ÿæˆè¯Šæ–­ç»ƒä¹ é¢˜ï¼ˆé€‰æ‹©é¢˜ã€å¡«ç©ºé¢˜ã€åˆ¤æ–­é¢˜ã€ç®€ç­”é¢˜ï¼‰
   - è¾“å…¥ï¼šçŸ¥è¯†ç‚¹ä¿¡æ¯
   - è¾“å‡ºï¼šç»ƒä¹ é¢˜åˆ—è¡¨

3. **`resource_pusher.py`** - èµ„æºæ¨é€æœºåˆ¶
   - åŠŸèƒ½ï¼šå°†ç”Ÿæˆçš„èµ„æºæ¨é€ç»™å­¦ç”Ÿ
   - æ”¯æŒï¼šWebSocketã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ•°æ®åº“ä¸‰ç§æ¨é€æ–¹å¼

4. **`resource_quality_evaluator.py`** - èµ„æºè´¨é‡è¯„ä¼°
   - åŠŸèƒ½ï¼šè¯„ä¼°ç”Ÿæˆçš„è¡¥å¿èµ„æºçš„è´¨é‡
   - è¯„ä¼°ç»´åº¦ï¼šå†…å®¹è´¨é‡ã€ç›¸å…³æ€§ã€æœ‰æ•ˆæ€§

**éœ€è¦å¯¹æ¥**ï¼š
- â³ **å¼ äºšé¹çš„AIæ¨¡å‹**ï¼ˆç¬¬6-7å‘¨ï¼Œå¯é€‰ï¼‰
  - å½“å‰ï¼šä½¿ç”¨æ¨¡æ¿ç”Ÿæˆ
  - å¯¹æ¥ç‚¹ï¼šé›†æˆGPT/Claude APIç”Ÿæˆæ›´é«˜è´¨é‡çš„å†…å®¹

- â³ **æ¨é›…å¨Ÿçš„åç«¯API**ï¼ˆç¬¬6-7å‘¨ï¼‰
  - å½“å‰ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ¨é€
  - å¯¹æ¥ç‚¹ï¼šé€šè¿‡åç«¯APIæ¨é€èµ„æº

---

### 3. æµ‹è¯•å’Œä¼˜åŒ– âœ…

**å·²å®Œæˆæ–‡ä»¶**ï¼š
- `algorithm/tests/integration_test.py` - ç³»ç»Ÿé›†æˆæµ‹è¯•
- `algorithm/performance_test.py` - æ€§èƒ½æµ‹è¯•å·¥å…·
- `algorithm/performance_optimizer.py` - æ€§èƒ½ä¼˜åŒ–å·¥å…·
- `algorithm/tests/é›†æˆæµ‹è¯•æŠ¥å‘Š.md` - æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•ç»“æœ**ï¼šæ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ…

---

## ğŸ”— éœ€è¦å¯¹æ¥çš„åŠŸèƒ½

### 1. ä¸å¼ äºšé¹å¯¹æ¥ï¼ˆASR/OCRç»“æœï¼‰

**å¯¹æ¥æ—¶é—´**ï¼šç¬¬3-4å‘¨

**å¯¹æ¥å†…å®¹**ï¼š
- ASRè½¬å†™æ–‡æœ¬ï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰
- OCRè¯†åˆ«æ–‡æœ¬ï¼ˆå¸¦æ—¶é—´æˆ³ã€å¹»ç¯ç‰‡ç¼–å·ï¼‰

**å¯¹æ¥ä½ç½®**ï¼š
- **æ–‡ä»¶**ï¼š`algorithm/knowledge_point_segmenter.py`
- **å‡½æ•°**ï¼š`segment(asr_texts, ocr_texts, subtitles)`
- **å½“å‰çŠ¶æ€**ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ® `algorithm/tests/mock_data.py` ä¸­çš„ `MOCK_ASR_TEXTS` å’Œ `MOCK_OCR_TEXTS`

**å¯¹æ¥æ–¹å¼**ï¼š
```python
# å½“å‰ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
from tests.mock_data import MOCK_ASR_TEXTS, MOCK_OCR_TEXTS
knowledge_points = segmenter.segment(MOCK_ASR_TEXTS, MOCK_OCR_TEXTS)

# å¯¹æ¥åï¼ˆçœŸå®æ•°æ®ï¼‰
from api_client import ASROCRClient
client = ASROCRClient(api_url="å¼ äºšé¹çš„APIåœ°å€")
asr_texts, ocr_texts = client.get_video_texts(video_id)
knowledge_points = segmenter.segment(asr_texts, ocr_texts)
```

**éœ€è¦å¼ äºšé¹æä¾›**ï¼š
- ASR APIæ¥å£åœ°å€å’Œè°ƒç”¨æ–¹å¼
- OCR APIæ¥å£åœ°å€å’Œè°ƒç”¨æ–¹å¼
- æ•°æ®æ ¼å¼è¯´æ˜ï¼ˆJSONæ ¼å¼ï¼‰

---

### 2. ä¸æˆæ€¡å¯¹æ¥ï¼ˆå‰ç«¯è¡Œä¸ºé‡‡é›†ï¼‰

**å¯¹æ¥æ—¶é—´**ï¼šç¬¬3-4å‘¨

**å¯¹æ¥å†…å®¹**ï¼š
- è§‚çœ‹è¡Œä¸ºäº‹ä»¶ï¼ˆplayã€pauseã€seekã€replayç­‰ï¼‰
- äº‹ä»¶æ—¶é—´æˆ³
- çŸ¥è¯†ç‚¹ID

**å¯¹æ¥ä½ç½®**ï¼š
- **æ–‡ä»¶**ï¼š`algorithm/difficulty_detector.py`
- **å‡½æ•°**ï¼š`detect(behavior_data)`
- **å½“å‰çŠ¶æ€**ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ® `algorithm/tests/mock_data.py` ä¸­çš„ `MOCK_BEHAVIOR_DATA`

**å¯¹æ¥æ–¹å¼**ï¼š
```python
# å½“å‰ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
from tests.mock_data import MOCK_BEHAVIOR_DATA
result = detector.detect(MOCK_BEHAVIOR_DATA)

# å¯¹æ¥åï¼ˆä»æ•°æ®åº“è·å–ï¼‰
from database import get_watch_events
behavior_data = get_watch_events(user_id, knowledge_point_id)
result = detector.detect(behavior_data)
```

**éœ€è¦æˆæ€¡æä¾›**ï¼š
- è¡Œä¸ºäº‹ä»¶æ•°æ®æ ¼å¼ï¼ˆJSONæ ¼å¼ï¼‰
- äº‹ä»¶ä¸ŠæŠ¥APIæ¥å£ï¼ˆç”±æ¨é›…å¨Ÿå®ç°ï¼‰

---

### 3. ä¸æ¨é›…å¨Ÿå¯¹æ¥ï¼ˆåç«¯APIï¼‰

**å¯¹æ¥æ—¶é—´**ï¼šç¬¬4-7å‘¨

**å¯¹æ¥å†…å®¹**ï¼š

#### 3.1 è¡Œä¸ºæ•°æ®è·å–ï¼ˆç¬¬4-5å‘¨ï¼‰
- **æ–‡ä»¶**ï¼š`algorithm/difficulty_detector.py`ã€`algorithm/public_difficulty_detector.py`
- **éœ€è¦API**ï¼š
  - `GET /api/users/{user_id}/watch-events` - è·å–ç”¨æˆ·è§‚çœ‹äº‹ä»¶
  - `GET /api/knowledge-points/{kp_id}/watch-events` - è·å–çŸ¥è¯†ç‚¹è§‚çœ‹äº‹ä»¶

#### 3.2 æŒæ¡çŠ¶æ€å’Œä¾èµ–å…³ç³»ï¼ˆç¬¬6-7å‘¨ï¼‰
- **æ–‡ä»¶**ï¼š`algorithm/learning_path_generator.py`
- **éœ€è¦API**ï¼š
  - `GET /api/users/{user_id}/mastery-status` - è·å–æŒæ¡çŠ¶æ€
  - `GET /api/knowledge-points/{kp_id}/dependencies` - è·å–ä¾èµ–å…³ç³»

#### 3.3 èµ„æºæ¨é€ï¼ˆç¬¬6-7å‘¨ï¼‰
- **æ–‡ä»¶**ï¼š`algorithm/resource_pusher.py`
- **éœ€è¦API**ï¼š
  - `POST /api/resources/push` - æ¨é€èµ„æº
  - `GET /api/users/{user_id}/pending-resources` - è·å–å¾…æ¨é€èµ„æº

**å½“å‰çŠ¶æ€**ï¼šæ‰€æœ‰ç®—æ³•ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œ

**å¯¹æ¥æ–¹å¼**ï¼š
```python
# å½“å‰ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
mastery_status = MOCK_MASTERY_STATUS
dependencies = MOCK_DEPENDENCIES

# å¯¹æ¥åï¼ˆä»APIè·å–ï¼‰
from api_client import BackendClient
client = BackendClient(api_url="æ¨é›…å¨Ÿçš„APIåœ°å€")
mastery_status = client.get_mastery_status(user_id)
dependencies = client.get_dependencies(knowledge_point_id)
```

**éœ€è¦æ¨é›…å¨Ÿæä¾›**ï¼š
- åç«¯APIæ¥å£åœ°å€
- APIæ–‡æ¡£ï¼ˆSwaggerï¼‰
- æ•°æ®æ ¼å¼è¯´æ˜ï¼ˆJSONæ ¼å¼ï¼‰

---

## ğŸ‘¥ é˜Ÿå‘˜åº”è¯¥åœ¨å“ªé‡Œå®ç°åŠŸèƒ½

### æˆæ€¡ï¼ˆå‰ç«¯å¼€å‘ï¼‰- å­¦ç”Ÿç«¯+æ•™å¸ˆç«¯ç•Œé¢

#### å®ç°ä½ç½®

**é¡¹ç›®ç»“æ„**ï¼š
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ student/          # å­¦ç”Ÿç«¯é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ VideoPlayer.vue      # è§†é¢‘æ’­æ”¾é¡µï¼ˆç¬¬3-4å‘¨ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ ResourcePage.vue      # è¡¥å¿èµ„æºé¡µï¼ˆç¬¬5-6å‘¨ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ LearningPath.vue      # å­¦ä¹ è·¯å¾„é¡µï¼ˆç¬¬6-7å‘¨ï¼‰
â”‚   â”‚   â””â”€â”€ teacher/          # æ•™å¸ˆç«¯é¡µé¢
â”‚   â”‚       â”œâ”€â”€ Dashboard.vue         # æ•™å­¦æ•ˆæœä»ªè¡¨ç›˜ï¼ˆç¬¬7å‘¨ï¼‰
â”‚   â”‚       â””â”€â”€ Annotation.vue        # æ•™å¸ˆæ ‡æ³¨å·¥ä½œå°ï¼ˆç¬¬8å‘¨ï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ VideoPlayer.vue   # è§†é¢‘æ’­æ”¾å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ KnowledgePointList.vue  # çŸ¥è¯†ç‚¹ç›®å½•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ResourceCard.vue   # çŸ¥è¯†å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Exercise.vue       # ç»ƒä¹ ç»„ä»¶
â”‚   â”‚   â””â”€â”€ LearningPathChart.vue  # å­¦ä¹ è·¯å¾„å¯è§†åŒ–
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ backend.js         # åç«¯APIè°ƒç”¨å°è£…
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ eventCollector.js # è¡Œä¸ºäº‹ä»¶é‡‡é›†å·¥å…·
```

#### å…³é”®å®ç°ç‚¹

1. **è¡Œä¸ºäº‹ä»¶é‡‡é›†**ï¼ˆç¬¬3-4å‘¨ï¼‰
   - **ä½ç½®**ï¼š`frontend/src/utils/eventCollector.js`
   - **åŠŸèƒ½**ï¼šé‡‡é›†playã€pauseã€seekã€replayç­‰äº‹ä»¶
   - **å¯¹æ¥**ï¼šè°ƒç”¨æ¨é›…å¨Ÿçš„API `POST /api/watch-events` ä¸ŠæŠ¥äº‹ä»¶

2. **è§†é¢‘æ’­æ”¾é¡µ**ï¼ˆç¬¬3-4å‘¨ï¼‰
   - **ä½ç½®**ï¼š`frontend/src/views/student/VideoPlayer.vue`
   - **åŠŸèƒ½**ï¼šè§†é¢‘æ’­æ”¾ã€çŸ¥è¯†ç‚¹ç›®å½•ã€è¡Œä¸ºé‡‡é›†
   - **å¯¹æ¥**ï¼šè°ƒç”¨åç«¯APIè·å–è§†é¢‘å’ŒçŸ¥è¯†ç‚¹ä¿¡æ¯

3. **è¡¥å¿èµ„æºé¡µ**ï¼ˆç¬¬5-6å‘¨ï¼‰
   - **ä½ç½®**ï¼š`frontend/src/views/student/ResourcePage.vue`
   - **åŠŸèƒ½**ï¼šå±•ç¤ºçŸ¥è¯†å¡ç‰‡ã€ç»ƒä¹ é¢˜ã€åé¦ˆæŒ‰é’®
   - **å¯¹æ¥**ï¼šè°ƒç”¨åç«¯API `GET /api/knowledge-points/{kp_id}/resources`

4. **å­¦ä¹ è·¯å¾„é¡µ**ï¼ˆç¬¬6-7å‘¨ï¼‰
   - **ä½ç½®**ï¼š`frontend/src/views/student/LearningPath.vue`
   - **åŠŸèƒ½**ï¼šå¯è§†åŒ–å±•ç¤ºå­¦ä¹ è·¯å¾„ã€è¿›åº¦
   - **å¯¹æ¥**ï¼šè°ƒç”¨åç«¯API `GET /api/users/{user_id}/learning-path`

---

### æ¨é›…å¨Ÿï¼ˆåç«¯å¼€å‘ï¼‰- ä¸šåŠ¡é€»è¾‘+APIæ¥å£

#### å®ç°ä½ç½®

**é¡¹ç›®ç»“æ„**ï¼š
```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ videos.py         # è§†é¢‘ç®¡ç†æ¥å£ï¼ˆç¬¬3-4å‘¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ watch_events.py   # è¡Œä¸ºé‡‡é›†æ¥å£ï¼ˆç¬¬4-5å‘¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ difficulty.py     # éš¾ç‚¹è¯†åˆ«æ¥å£ï¼ˆç¬¬5å‘¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ resources.py      # è¡¥å¿èµ„æºæ¥å£ï¼ˆç¬¬6-7å‘¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ learning_path.py  # å­¦ä¹ è·¯å¾„æ¥å£ï¼ˆç¬¬6-7å‘¨ï¼‰
â”‚   â”‚   â””â”€â”€ teacher.py        # æ•™å¸ˆç«¯æ¥å£ï¼ˆç¬¬7-8å‘¨ï¼‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ difficulty_service.py    # éš¾ç‚¹è¯†åˆ«æœåŠ¡ï¼ˆè°ƒç”¨é˜Ÿé•¿ç®—æ³•ï¼‰
â”‚   â”‚   â”œâ”€â”€ path_service.py          # å­¦ä¹ è·¯å¾„æœåŠ¡ï¼ˆè°ƒç”¨é˜Ÿé•¿ç®—æ³•ï¼‰
â”‚   â”‚   â””â”€â”€ resource_service.py      # è¡¥å¿èµ„æºæœåŠ¡ï¼ˆè°ƒç”¨é˜Ÿé•¿ç®—æ³•ï¼‰
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ database.py       # æ•°æ®æ¨¡å‹ï¼ˆç¬¬2-3å‘¨ï¼‰
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ algorithm_client.py  # ç®—æ³•æ¨¡å—è°ƒç”¨å°è£…
```

#### å…³é”®å®ç°ç‚¹

1. **æ•°æ®æ¨¡å‹å®ç°**ï¼ˆç¬¬2-3å‘¨ï¼‰
   - **ä½ç½®**ï¼š`backend/app/models/database.py`
   - **å‚è€ƒ**ï¼š`docs/æ•°æ®åº“è®¾è®¡.md`
   - **åŠŸèƒ½**ï¼šå®ç°æ‰€æœ‰æ•°æ®åº“è¡¨ç»“æ„

2. **è¡Œä¸ºé‡‡é›†æ¥å£**ï¼ˆç¬¬4-5å‘¨ï¼‰
   - **ä½ç½®**ï¼š`backend/app/api/watch_events.py`
   - **åŠŸèƒ½**ï¼šæ¥æ”¶å‰ç«¯ä¸ŠæŠ¥çš„è¡Œä¸ºäº‹ä»¶
   - **å¯¹æ¥**ï¼šå­˜å‚¨åˆ°æ•°æ®åº“ï¼Œä¾›é˜Ÿé•¿ç®—æ³•ä½¿ç”¨

3. **éš¾ç‚¹è¯†åˆ«æœåŠ¡**ï¼ˆç¬¬5å‘¨ï¼‰
   - **ä½ç½®**ï¼š`backend/app/services/difficulty_service.py`
   - **åŠŸèƒ½**ï¼šè°ƒç”¨é˜Ÿé•¿çš„ `difficulty_detector.py` å’Œ `public_difficulty_detector.py`
   - **å¯¹æ¥**ï¼šä»æ•°æ®åº“è·å–è¡Œä¸ºæ•°æ®ï¼Œè°ƒç”¨ç®—æ³•ï¼Œè¿”å›ç»“æœ

4. **å­¦ä¹ è·¯å¾„æœåŠ¡**ï¼ˆç¬¬6-7å‘¨ï¼‰
   - **ä½ç½®**ï¼š`backend/app/services/path_service.py`
   - **åŠŸèƒ½**ï¼šè°ƒç”¨é˜Ÿé•¿çš„ `learning_path_generator.py` å’Œ `path_adjuster.py`
   - **å¯¹æ¥**ï¼šä»æ•°æ®åº“è·å–æŒæ¡çŠ¶æ€å’Œä¾èµ–å…³ç³»ï¼Œè°ƒç”¨ç®—æ³•ï¼Œè¿”å›è·¯å¾„

5. **è¡¥å¿èµ„æºæœåŠ¡**ï¼ˆç¬¬6-7å‘¨ï¼‰
   - **ä½ç½®**ï¼š`backend/app/services/resource_service.py`
   - **åŠŸèƒ½**ï¼šè°ƒç”¨é˜Ÿé•¿çš„èµ„æºç”Ÿæˆç®—æ³•ï¼Œæ¨é€èµ„æº
   - **å¯¹æ¥**ï¼šè°ƒç”¨ `knowledge_card_generator.py`ã€`exercise_generator.py`ã€`resource_pusher.py`

**ç®—æ³•è°ƒç”¨ç¤ºä¾‹**ï¼š
```python
# backend/app/services/difficulty_service.py
from algorithm.difficulty_detector import DifficultyDetector, BehaviorData

def detect_difficulty(user_id, knowledge_point_id):
    # ä»æ•°æ®åº“è·å–è¡Œä¸ºæ•°æ®
    behavior = db.get_watch_events(user_id, knowledge_point_id)
    
    # è½¬æ¢ä¸ºç®—æ³•éœ€è¦çš„æ ¼å¼
    behavior_data = BehaviorData(
        user_id=user_id,
        knowledge_point_id=knowledge_point_id,
        replay_count=behavior.replay_count,
        pause_count=behavior.pause_count,
        # ...
    )
    
    # è°ƒç”¨é˜Ÿé•¿å¼€å‘çš„ç®—æ³•
    detector = DifficultyDetector()
    result = detector.detect(behavior_data)
    
    # è¿”å›ç»“æœ
    return result
```

---

### å¼ äºšé¹ï¼ˆAIå¼•æ“é›†æˆï¼‰- ASR/OCR+èµ„æºç”Ÿæˆ

#### ğŸ“ å®ç°ä½ç½®

**éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `ai_engine/` ç›®å½•**ï¼Œç»“æ„å¦‚ä¸‹ï¼š

```
ai_engine/
â”œâ”€â”€ asr/
â”‚   â””â”€â”€ asr_client.py              # ASRè¯­éŸ³è¯†åˆ«é›†æˆï¼ˆç¬¬3-4å‘¨ï¼‰â­
â”œâ”€â”€ ocr/
â”‚   â””â”€â”€ ocr_client.py              # OCRæ–‡å­—è¯†åˆ«é›†æˆï¼ˆç¬¬3-4å‘¨ï¼‰â­
â”œâ”€â”€ text_processing/
â”‚   â”œâ”€â”€ keyword_extractor.py       # å…³é”®è¯æå–ï¼ˆç¬¬4å‘¨ï¼‰
â”‚   â””â”€â”€ summary_generator.py       # æ–‡æœ¬æ‘˜è¦ç”Ÿæˆï¼ˆç¬¬4å‘¨ï¼‰
â””â”€â”€ resource_generation/
    â”œâ”€â”€ card_generator.py          # çŸ¥è¯†å¡ç‰‡ç”Ÿæˆï¼ˆç¬¬6-7å‘¨ï¼Œå¯é€‰ï¼‰
    â””â”€â”€ exercise_generator.py      # ç»ƒä¹ é¢˜ç”Ÿæˆï¼ˆç¬¬6-7å‘¨ï¼Œå¯é€‰ï¼‰
```

#### ğŸ¯ å…³é”®å®ç°ç‚¹

1. **ASR/OCRé›†æˆ**ï¼ˆç¬¬3-4å‘¨ï¼‰â­ **æœ€é‡è¦**
   - **ä½ç½®**ï¼š`ai_engine/asr/asr_client.py`ã€`ai_engine/ocr/ocr_client.py`
   - **åŠŸèƒ½**ï¼šé›†æˆASRå’ŒOCR APIï¼Œå¤„ç†è§†é¢‘
   - **å¯¹æ¥**ï¼šæä¾›ç»“æœç»™é˜Ÿé•¿çš„ `knowledge_point_segmenter.py`
   - **å‚è€ƒ**ï¼š`algorithm/tests/mock_data.py` ä¸­çš„ `MOCK_ASR_TEXTS` å’Œ `MOCK_OCR_TEXTS` æ ¼å¼

2. **æ–‡æœ¬å¤„ç†**ï¼ˆç¬¬4å‘¨ï¼‰
   - **ä½ç½®**ï¼š`ai_engine/text_processing/`
   - **åŠŸèƒ½**ï¼šå…³é”®è¯æå–ã€æ–‡æœ¬æ‘˜è¦
   - **å¯¹æ¥**ï¼šè¾…åŠ©é˜Ÿé•¿çš„çŸ¥è¯†ç‚¹æ ‡æ³¨ç®—æ³•

3. **èµ„æºç”Ÿæˆ**ï¼ˆç¬¬6-7å‘¨ï¼Œå¯é€‰ï¼‰
   - **ä½ç½®**ï¼š`ai_engine/resource_generation/`
   - **åŠŸèƒ½**ï¼šä½¿ç”¨AIæ¨¡å‹ç”ŸæˆçŸ¥è¯†å¡ç‰‡å’Œç»ƒä¹ é¢˜
   - **å¯¹æ¥**ï¼šå¯ä»¥æ›¿æ¢æˆ–å¢å¼ºé˜Ÿé•¿çš„ `knowledge_card_generator.py` å’Œ `exercise_generator.py`

**æ•°æ®æ ¼å¼è¦æ±‚**ï¼ˆå¿…é¡»ä¸¥æ ¼æŒ‰ç…§æ­¤æ ¼å¼ï¼‰ï¼š
```python
# ASRç»“æœæ ¼å¼ï¼ˆæä¾›ç»™é˜Ÿé•¿ç®—æ³•ï¼‰
asr_texts = [
    {"start_time": 0.0, "end_time": 120.0, "text": "è½¬å†™æ–‡æœ¬"},
    {"start_time": 120.0, "end_time": 240.0, "text": "è½¬å†™æ–‡æœ¬"},
    # ...
]

# OCRç»“æœæ ¼å¼ï¼ˆæä¾›ç»™é˜Ÿé•¿ç®—æ³•ï¼‰
ocr_texts = [
    {"start_time": 0.0, "end_time": 60.0, "text": "è¯†åˆ«æ–‡æœ¬", "slide_number": 1},
    {"start_time": 60.0, "end_time": 120.0, "text": "è¯†åˆ«æ–‡æœ¬", "slide_number": 1},
    # ...
]

# æä¾›ç»™é˜Ÿé•¿çš„æ¥å£
def get_video_texts(video_id):
    """è·å–è§†é¢‘çš„ASRå’ŒOCRæ–‡æœ¬"""
    asr_texts = asr_client.transcribe(video_id)
    ocr_texts = ocr_client.recognize(video_id)
    return asr_texts, ocr_texts
```

---

### é›·å®‡ï¼ˆæ•°æ®æ¨¡å‹+æµ‹è¯•+æ–‡æ¡£ï¼‰

#### ğŸ“ å®ç°ä½ç½®

**éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `tests/` ç›®å½•**ï¼ˆåŠŸèƒ½æµ‹è¯•ï¼‰ï¼Œ`docs/` ç›®å½•å·²å­˜åœ¨ï¼š

```
tests/
â”œâ”€â”€ functional/                    # åŠŸèƒ½æµ‹è¯•ï¼ˆç¬¬9-10å‘¨ï¼‰
â”‚   â”œâ”€â”€ test_video_parsing.py      # è§†é¢‘è§£ææµ‹è¯•
â”‚   â”œâ”€â”€ test_behavior_collection.py # è¡Œä¸ºé‡‡é›†æµ‹è¯•
â”‚   â”œâ”€â”€ test_difficulty_detection.py # éš¾ç‚¹è¯†åˆ«æµ‹è¯•
â”‚   â”œâ”€â”€ test_resource_push.py      # èµ„æºæ¨é€æµ‹è¯•
â”‚   â””â”€â”€ test_learning_path.py      # å­¦ä¹ è·¯å¾„æµ‹è¯•
â”œâ”€â”€ performance/                   # æ€§èƒ½æµ‹è¯•ï¼ˆç¬¬10-11å‘¨ï¼‰
â”‚   â””â”€â”€ performance_test.py
â””â”€â”€ accuracy/                      # å‡†ç¡®æ€§æµ‹è¯•ï¼ˆç¬¬11å‘¨ï¼‰
    â””â”€â”€ accuracy_test.py

docs/                              # æ–‡æ¡£ç›®å½•ï¼ˆå·²å­˜åœ¨ï¼‰
â”œâ”€â”€ user_manual.md                 # ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œï¼ˆç¬¬11-12å‘¨ï¼‰
â”œâ”€â”€ api_documentation.md           # APIæ–‡æ¡£ï¼ˆä¸æ¨é›…å¨Ÿåä½œï¼Œç¬¬8-9å‘¨ï¼‰
â””â”€â”€ test_report.md                 # æµ‹è¯•æŠ¥å‘Šï¼ˆç¬¬12å‘¨ï¼‰
```

#### ğŸ¯ å…³é”®å®ç°ç‚¹

1. **æ•°æ®æ¨¡å‹éªŒè¯**ï¼ˆç¬¬2-3å‘¨ï¼‰â­ **é‡è¦**
   - **ä½ç½®**ï¼šä¸æ¨é›…å¨Ÿåä½œ
   - **å‚è€ƒ**ï¼š`docs/æ•°æ®åº“è®¾è®¡.md` - å®Œæ•´çš„ERå›¾å’ŒSQLå»ºè¡¨è¯­å¥
   - **åŠŸèƒ½**ï¼šéªŒè¯æ•°æ®åº“è¡¨ç»“æ„æ˜¯å¦æ­£ç¡®
   - **å¯¹æ¥**ï¼šä¸æ¨é›…å¨Ÿä¸€èµ·ç¡®è®¤è¡¨ç»“æ„

2. **åŠŸèƒ½æµ‹è¯•**ï¼ˆç¬¬9-10å‘¨ï¼‰
   - **ä½ç½®**ï¼š`tests/functional/`
   - **åŠŸèƒ½**ï¼šæµ‹è¯•æ‰€æœ‰åŠŸèƒ½æ¨¡å—
   - **å‚è€ƒ**ï¼šé˜Ÿé•¿çš„ `algorithm/tests/integration_test.py` - å¯ä»¥å‚è€ƒæµ‹è¯•ç»“æ„

3. **æ€§èƒ½æµ‹è¯•**ï¼ˆç¬¬10-11å‘¨ï¼‰
   - **ä½ç½®**ï¼š`tests/performance/`
   - **åŠŸèƒ½**ï¼šæµ‹è¯•ç³»ç»Ÿæ€§èƒ½
   - **å‚è€ƒ**ï¼šé˜Ÿé•¿çš„ `algorithm/performance_test.py` - å¯ä»¥å‚è€ƒæµ‹è¯•æ–¹æ³•

4. **æ–‡æ¡£ç¼–å†™**ï¼ˆè´¯ç©¿å…¨ç¨‹ï¼‰
   - **ä½ç½®**ï¼š`docs/`
   - **åŠŸèƒ½**ï¼šç¼–å†™ç”¨æˆ·æ‰‹å†Œã€æµ‹è¯•æŠ¥å‘Šç­‰
   - **å‚è€ƒ**ï¼šå·²æœ‰çš„æ–‡æ¡£æ ¼å¼

---

## ğŸ“ å¯¹æ¥æ¥å£è§„èŒƒ

### æ•°æ®æ ¼å¼è§„èŒƒ

æ‰€æœ‰å¯¹æ¥éƒ½ä½¿ç”¨JSONæ ¼å¼ï¼Œå…·ä½“æ ¼å¼è§ï¼š
- `docs/APIæ¥å£è§„èŒƒ.md` - å®Œæ•´çš„APIæ¥å£è§„èŒƒ
- `algorithm/tests/mock_data.py` - æ¨¡æ‹Ÿæ•°æ®æ ¼å¼ï¼ˆå¯ä½œä¸ºå‚è€ƒï¼‰

### æ¥å£è°ƒç”¨æ–¹å¼

**ç®—æ³•æ¨¡å—è°ƒç”¨**ï¼ˆæ¨é›…å¨Ÿéœ€è¦ï¼‰ï¼š
```python
# åœ¨backend/app/utils/algorithm_client.pyä¸­å°è£…
from algorithm.difficulty_detector import DifficultyDetector
from algorithm.learning_path_generator import LearningPathGenerator
# ...
```

**APIæ¥å£è°ƒç”¨**ï¼ˆæˆæ€¡éœ€è¦ï¼‰ï¼š
```javascript
// åœ¨frontend/src/api/backend.jsä¸­å°è£…
import axios from 'axios'

export const api = {
  // ä¸ŠæŠ¥è¡Œä¸ºäº‹ä»¶
  reportWatchEvent(data) {
    return axios.post('/api/watch-events', data)
  },
  // è·å–å­¦ä¹ è·¯å¾„
  getLearningPath(userId) {
    return axios.get(`/api/users/${userId}/learning-path`)
  },
  // ...
}
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨

1. **æ‰€æœ‰é˜Ÿå‘˜**ï¼š
   - æ‹‰å–æœ€æ–°ä»£ç ï¼š`git pull origin develop`
   - æŸ¥çœ‹ `docs/` ç›®å½•ä¸‹çš„è®¾è®¡æ–‡æ¡£
   - æŸ¥çœ‹ `algorithm/` ç›®å½•ä¸‹çš„ç®—æ³•æ¨¡å—

2. **æˆæ€¡**ï¼š
   - åˆ›å»º `frontend/` ç›®å½•
   - æ­å»ºå‰ç«¯é¡¹ç›®æ¡†æ¶
   - å‚è€ƒ `docs/APIæ¥å£è§„èŒƒ.md` å‡†å¤‡å¯¹æ¥æ¥å£

3. **æ¨é›…å¨Ÿ**ï¼š
   - åˆ›å»º `backend/` ç›®å½•
   - æ­å»ºåç«¯é¡¹ç›®æ¡†æ¶
   - å‚è€ƒ `docs/æ•°æ®åº“è®¾è®¡.md` å®ç°æ•°æ®æ¨¡å‹
   - å‚è€ƒ `docs/APIæ¥å£è§„èŒƒ.md` å®ç°APIæ¥å£

4. **å¼ äºšé¹**ï¼š
   - åˆ›å»º `ai_engine/` ç›®å½•
   - é›†æˆASR/OCR API
   - å‡†å¤‡æä¾›æ•°æ®ç»™é˜Ÿé•¿ç®—æ³•

5. **é›·å®‡**ï¼š
   - åˆ›å»º `tests/` ç›®å½•
   - ç¼–å†™æµ‹è¯•ç”¨ä¾‹
   - å‡†å¤‡æµ‹è¯•æ•°æ®

---

## ğŸ“ éœ€è¦å¸®åŠ©æ—¶

- **æŸ¥çœ‹æ–‡æ¡£**ï¼š`docs/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡æ¡£
- **æŸ¥çœ‹ç®—æ³•**ï¼š`algorithm/` ç›®å½•ä¸‹çš„æ‰€æœ‰ç®—æ³•æ¨¡å—
- **æŸ¥çœ‹ç¤ºä¾‹**ï¼š`algorithm/` ç›®å½•ä¸‹çš„ `*æ•´åˆç¤ºä¾‹.py` æ–‡ä»¶
- **è”ç³»é˜Ÿé•¿**ï¼šé‡åˆ°é—®é¢˜åŠæ—¶æ²Ÿé€š

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€
